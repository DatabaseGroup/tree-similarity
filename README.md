# Table of Contents

- [General](#general)
- [Building Process](#building-process)
    - [Prerequisites](#prerequisites)
        - [Remarks](#remarks)
            - [Installing `cppcheck` from Source](#installing-cppcheck-from-source)
    - [Compilation](#compilation)
    - [Execution](#execution)
- [Coding Style](#coding-style)
    - [Exceptions](#exceptions)
    - [Additions](#additions)
    

# General

This section summarizes some general rules for this repository. We encourage
everybody who works on the tree similarity framework to stick to these rules.

* This `README.md` contains every piece of important information regarding the
tree similarity framework, e.g., the building process, the coding style, et cetera.
* If an issue is fixed, please include some sort of issue description in the
commit message, e.g., **Fix issue #3.2**, and mark the corresponding item in the
issue as completed (see the
[`Issues`](https://frosch.cosy.sbg.ac.at/mpawlik/tree-similarity/issues) section
on the left-hand navigation).
* If you find any bugs/performance bottlenecks/..., either open a completely new
issue or add an item to an existing issue (see the
[`Issues`](https://frosch.cosy.sbg.ac.at/mpawlik/tree-similarity/issues) section
on the left-hand navigation). In either case, please add a meaningful description.
The description should contain enough information so that any person is able to
resolve it (and mark it as completed).
* In general, write meaningful commit message. One possible rule would be to
complete the following sentence with your commit message:

    `When applied, this commit will: <commit-message>`

    For instance, `When applied, this commit will Add links to CMake FAQs`.
* Use `make check` heavily. It runs several checks (utilizing `valgrind` and
`cppcheck`, as of yet). However, if one of the checks reports some error, resolve
them before continue writing new code (and potentially introducing additional
errors).

# Building Process

The following commands are meant to be executed from the root directory of this
repository, i.e. `tree_similarity/`.

## Prerequisites

* A C++ compiler (preferably [`clang`](http://clang.llvm.org/) in version >=
3.4.0)
* [`CMake`](https://cmake.org/) in version >= 2.8
* [`valgrind`](http://valgrind.org/) in version >= 3.10.1 (to be able to use
`make check-dynamic` or `make check`)
* [`cppcheck`](https://github.com/danmar/cppcheck) in version >= 1.74 (to be able
to use `make check-static` or `make check`)

### Remarks

#### Installing [`cppcheck`](https://github.com/danmar/cppcheck) from Source

~~~
git clone git@github.com:danmar/cppcheck.git && cd cppcheck
make SRCDIR=build CFGDIR=/usr/bin/cfg HAVE_RULES=yes
sudo make install CFGDIR=/usr/bin/cfg
~~~

The path supplied to `CFGDIR` can be adjusted to a custom path (e.g.,
`~/cppcheck-cfg`). However, the path has to be consistent for `make` and
`make install`.

## Compilation

The following commands perform an out-of-source building (see the
[CMake FAQs](https://cmake.org/Wiki/CMake_FAQ#Out-of-source_build_trees)).

~~~
mkdir build && cd build/ && CXX=clang++ cmake ../src && make
~~~

The resulting directory (`build`) then contains all the files generated by CMake.

## Execution

The following target can be used to execute the binary using a prespecified test
input.

~~~
cd build/ && make execute
~~~

Another option is to execute the binary directly from the command-line. The trees
have to be supplied using the brackets notation.

~~~
cd build/ && ./tree_similarity '<first-tree>' '<second-tree>'
~~~

# Coding Style

See [Google C++ Style Guide](https://google.github.io/styleguide/cppguide.html)
as well as the exceptions/additions/rules in the following section.

It is important to mentioned that these exceptions/additions/rules **overrule**
conflicting/inconsistent rules from 
[Google's C++ Style Guide](https://google.github.io/styleguide/cppguide.html).

## Exceptions

* We **declare AND define** all functions/classes in the `.h` files. This is due
to the fact that template functions/classes are used in almost every `.h` file.

## Additions

* We **always** use the
[`at`](http://www.cplusplus.com/reference/vector/vector/at/) member of the
[`std::vector`](http://www.cplusplus.com/reference/vector/) container when we
want to access an element. As a consequence, we try to avoid the
[`[]`](http://www.cplusplus.com/reference/vector/vector/operator%5B%5D/) operator.

    The main reason is that
[`at`](http://www.cplusplus.com/reference/vector/vector/at/) performs a range
check, whereas the 
[`[]`](http://www.cplusplus.com/reference/vector/vector/operator%5B%5D/) operator
does not.